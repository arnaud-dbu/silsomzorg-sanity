---
import { Icon } from "astro-icon/components";
const { nav, companyInfo } = Astro.props;
---

<div
  id="flyout"
  class="js-hidden sm:hidden fixed content-center w-screen h-screen bg-primary z-30 text-white"
>
  <div class="p-10 flex flex-col items-center gap-16">
    <!-- Navigation -->
    <nav>
      <ul class="items-center gap-6 flex flex-col">
        {
          nav.map((item: any) => (
            <>
              <li>
                <a
                  class="link link--primary text-xl"
                  href={`/${item.entry.slug.current}`}
                >
                  {item.title}
                </a>
              </li>
            </>
          ))
        }
        <li class="">
          <a
            class="flex-center flex gap-1 border border-white/70 rounded-full px-4 py-[6px]"
            href={`mailto:${companyInfo.email}`}
          >
            <span class="text-lg">Stuur bericht</span>
            <Icon name="paper-plane" class="text-white text-lg lg:text-xl" />
          </a>
        </li>
      </ul>
    </nav>
  </div>
</div>

<script>
  class Flyout {
    constructor() {
      const burger = document.getElementById("burger") as HTMLInputElement;
      const flyout = document.querySelector("#flyout") as HTMLElement;

      burger.addEventListener("click", () => {
        if (flyout.classList.contains("js-hidden")) {
          flyout.classList.remove("js-hidden");
          document.body.style.overflow = "hidden";
        } else {
          flyout.classList.add("js-hidden");
          document.body.style.overflow = "auto";
        }
      });
    }
  }

  new Flyout();
</script>
