---
import PageBuilder from "../components/PageBuilder.astro";
import PageHeader from "../blocks/PageHeader.astro";
import Layout from "../layouts/Layout.astro";
import { getPageContent } from "../utils/sanity";
const services = await getPageContent("service");

export async function getStaticPaths() {
  const data = await getPageContent("services");

  const pages = data.map((page: any) => {
    return {
      slug: page.slug.current,
      pageHeader: page.pageHeader,
      pageBuilder: page.pageBuilder,
    };
  });

  return pages.map(({ slug, pageHeader, pageBuilder }: any) => {
    return {
      params: { services: slug },
      props: { pageHeader, pageBuilder },
    };
  });
}

const {
  pageHeader,
  pageBuilder,
}: {
  pageHeader: { title: string; description: string };
  pageBuilder: any;
  shape: boolean;
} = Astro.props;

const { blocks } = pageBuilder ?? {};
---

<Layout title={pageHeader.title} shape={true}>
  <PageHeader data={pageHeader} />
  <div class="container relative -top-20 -mb-20">
    <div class="grid grid-cols-1 md:grid-cols-2 md:gap-6 gap-4">
      {
        services.map((card: any) => {
          return (
            <>
              <div class="flex flex-col gap-2 lg:gap-4 bg-white p-6 sm:p-8 border-primary border">
                {/* <Image
                    sizes="150px"
                    srcset={srcSet(imageUrl)}
                    width={1000}
                    height={1000}
                    src={imageUrl}
                    alt={card.title}
                    class="w-24"
                  /> */}
                <h3 class="text-2xl lg:text-3xl font-normal ">
                  {card.overviewTitle}
                </h3>
                <p class="text-lg">{card.overviewDescription}</p>
                <a
                  class="btn btn--outline mt-auto"
                  href={`/aanbod/${card.slug.current}`}
                >
                  Meer info
                </a>
              </div>
            </>
          );
        })
      }
    </div>
  </div>
  {pageBuilder && <PageBuilder blocks={blocks} />}
</Layout>
